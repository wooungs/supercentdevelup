<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>슈퍼센트 데스크테리어 선택</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .level-1 { background: linear-gradient(135deg, #c084fc 0%, #f472b6 100%); }
        .level-1-5 { background: linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%); }
        .level-2 { background: linear-gradient(135deg, #6366f1 0%, #3b82f6 100%); }
        .level-3 { background: linear-gradient(135deg, #3b82f6 0%, #06b6d4 100%); }
        .level-4 { background: linear-gradient(135deg, #06b6d4 0%, #14b8a6 100%); }
        .level-5 { background: linear-gradient(135deg, #14b8a6 0%, #10b981 100%); }
        .confetti { 
            position: fixed; 
            pointer-events: none; 
            z-index: 9999; 
            animation: fall 3s linear infinite; 
            font-size: 20px;
        }
        @keyframes fall { 
            0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; } 
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; } 
        }
        .bg-clip-text {
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .5; }
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-purple-900 via-purple-800 to-indigo-900 text-white">
    <div id="confetti-container"></div>
    
    <!-- Header -->
    <div class="relative overflow-hidden bg-gradient-to-r from-purple-600 via-purple-700 to-indigo-600 px-6 py-12">
        <div class="absolute inset-0 bg-black opacity-20"></div>
        <div class="relative z-10 max-w-4xl mx-auto text-center">
            <div class="flex items-center justify-center mb-4">
                <h1 class="text-5xl font-bold bg-gradient-to-r from-white to-purple-200 bg-clip-text text-transparent flex items-center">
                    슈퍼센트 데벨업 
                    <span class="ml-3 text-6xl" style="background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #feca57); -webkit-background-clip: text; -webkit-text-fill-color: transparent; filter: drop-shadow(0 0 10px rgba(255,107,107,0.3));">🚀</span>
                </h1>
            </div>
            <p class="text-xl text-purple-100 mb-2">Desk Level-UP! Supercharge your desk</p>
            <p class="text-lg text-purple-200 mb-2 flex items-center justify-center">
                <span class="text-yellow-300 mr-2">✨</span>
                새로워진 오피스, 더 새로워진 나만의 자리!
                <span class="text-yellow-300 ml-2">✨</span>
            </p>
            <p class="text-purple-200 max-w-2xl mx-auto mb-6">
                최대 9점까지 품목을 자유롭게 선택해 나만의 Supercharge한 데스크를 만들어보세요 🧑🏻‍💻
            </p>
            <div class="flex justify-center">
                <a href="https://www.notion.so/22593b2d257380f9b196eca8f4b44dc0?source=copy_link" 
                   target="_blank" 
                   class="inline-flex items-center px-6 py-3 bg-gradient-to-r from-yellow-400 to-orange-400 text-purple-900 font-bold rounded-lg hover:from-yellow-500 hover:to-orange-500 transition-all duration-300 transform hover:scale-105 shadow-lg">
                    👀 아이템 상세 설명 보러가기
                </a>
            </div>
        </div>
    </div>

    <!-- Status Bar -->
    <div class="sticky top-0 z-40 bg-gradient-to-r from-purple-800 to-indigo-800 shadow-lg">
        <div class="max-w-4xl mx-auto px-6 py-4">
            <div class="flex items-center justify-between text-center">
                <div class="flex items-center space-x-6">
                    <div class="flex items-center">
                        <span class="text-yellow-400 mr-2">⭐</span>
                        <span class="font-semibold" id="points-display">0.0 / 9 점</span>
                    </div>
                    <div class="w-48 bg-purple-900 rounded-full h-3">
                        <div id="progress-bar" class="bg-gradient-to-r from-yellow-400 to-orange-400 h-3 rounded-full transition-all duration-500" style="width: 0%"></div>
                    </div>
                </div>
                <div class="flex items-center">
                    <span class="text-pink-400 mr-2">💖</span>
                    <span class="font-semibold text-purple-200" id="count-display">0개 선택됨</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Items Grid -->
    <div class="max-w-6xl mx-auto px-6 py-8">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="items-grid">
            <!-- Items will be populated by JavaScript -->
        </div>

        <!-- Selection Summary -->
        <div id="selection-summary" class="mt-12 bg-gradient-to-r from-purple-800 to-indigo-800 rounded-2xl p-8 shadow-2xl" style="display: none;">
            <h3 class="text-2xl font-bold mb-6 flex items-center">
                <span class="text-yellow-400 mr-3">🎁</span>
                선택한 아이템 (<span id="summary-count">0</span>개)
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6" id="selected-items">
                <!-- Selected items will be populated by JavaScript -->
            </div>
            
            <div class="border-t border-purple-600 pt-6">
                <div class="flex items-center justify-between text-xl font-bold mb-4">
                    <span>총 합계</span>
                    <div class="flex items-center space-x-6">
                        <span class="text-yellow-400" id="total-count">0개 선택</span>
                        <span class="text-yellow-400" id="total-points">0.0 / 9점</span>
                    </div>
                </div>
                
                <!-- Submit Form -->
                <div class="bg-purple-900 bg-opacity-50 rounded-lg p-6 mt-6">
                    <h4 class="text-lg font-semibold mb-4 text-center text-white">선택 완료하기</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium text-purple-200 mb-2">닉네임</label>
                            <input type="text" id="user-name" class="w-full px-3 py-2 bg-purple-800 border border-purple-600 rounded-lg text-white placeholder-purple-300 focus:outline-none focus:ring-2 focus:ring-yellow-400" placeholder="닉네임을 입력하세요">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-purple-200 mb-2">부서</label>
                            <select id="user-department" class="w-full px-3 py-2 bg-purple-800 border border-purple-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-yellow-400">
                                <option value="">부서를 선택하세요</option>
                                <option value="UA">UA</option>
                                <option value="Creative">Creative</option>
                                <option value="AD Dev">AD Dev</option>
                                <option value="AD Monetize">AD Monetize</option>
                                <option value="Growth Data Science">Growth Data Science</option>
                                <option value="Product Management">Product Management</option>
                                <option value="Product Strategy">Product Strategy</option>
                                <option value="Publishing Partnerships">Publishing Partnerships</option>
                                <option value="New Business">New Business</option>
                                <option value="Meta-Ops">Meta-Ops</option>
                                <option value="Platform">Platform</option>
                                <option value="QA">QA</option>
                                <option value="UI/UX">UI/UX</option>
                                <option value="Sound">Sound</option>
                                <option value="New Project">New Project</option>
                                <option value="Hybrid-Casual">Hybrid-Casual</option>
                                <option value="Dev-Ops">Dev-Ops</option>
                                <option value="Live-Ops">Live-Ops</option>
                                <option value="Hybrid-RPG">Hybrid-RPG</option>
                                <option value="Data Platform">Data Platform</option>
                                <option value="Accounting">Accounting</option>
                                <option value="Financial Planning">Financial Planning</option>
                                <option value="Legal">Legal</option>
                                <option value="HR">HR</option>
                                <option value="GA">GA</option>
                            </select>
                        </div>
                    </div>
                    <button onclick="submitToGoogleForm()" class="w-full bg-gradient-to-r from-yellow-400 to-orange-400 text-purple-900 font-bold py-3 px-6 rounded-lg hover:from-yellow-500 hover:to-orange-500 transition-all duration-300 transform hover:scale-105">
                        🚀 구글 폼으로 제출하기
                    </button>
                </div>
                
                <div id="perfect-combo" class="mt-4 text-center" style="display: none;">
                    <p class="text-yellow-400 text-lg font-semibold animate-pulse">
                        🎉 완벽한 조합이에요! 🎉
                    </p>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="mt-16 text-center">
            <div class="bg-gradient-to-r from-purple-800 to-indigo-800 rounded-2xl p-8">
                <p class="text-purple-200 text-lg leading-relaxed">
                    선택한 아이템 하나하나가 당신의 슈퍼센트 라이프를 Supercharge해줄 거예요!<br>
                    새로워진 오피스, 새로워진 데스크와 함께 더 새롭게 빛날 당신을 응원합니다 ✨
                </p>
            </div>
        </div>
    </div>

    <script>
        const items = [
            // 책상 위 정리 아이템
            { id: 1, name: "컵홀더&헤드셋 걸이", level: 1, points: 1, category: "책상 위 정리 아이템" },
            { id: 13, name: "데스크정리함 A", level: 2, points: 2, category: "책상 위 정리 아이템" },
            { id: 14, name: "데스크정리함 B", level: 3, points: 3, category: "책상 위 정리 아이템" },
            
            // 다용도 오거나이저
            { id: 6, name: "오거나이저 A", level: 1.5, points: 1.5, category: "다용도 오거나이저" },
            { id: 10, name: "오거나이저 B", level: 2, points: 2, category: "다용도 오거나이저" },
            { id: 17, name: "오거나이저 C", level: 4, points: 4, category: "다용도 오거나이저" },
            { id: 18, name: "오거나이저 D", level: 4, points: 4, category: "다용도 오거나이저" },
            { id: 16, name: "데스크 매트", level: 3, points: 3, category: "다용도 오거나이저" },
            
            // 무드 & 집중 조명
            { id: 9, name: "전구", level: 2, points: 2, category: "무드 & 집중 조명" },
            { id: 19, name: "LED 스탠드 A", level: 4, points: 4, category: "무드 & 집중 조명" },
            { id: 20, name: "LED 스탠드 B", level: 4, points: 4, category: "무드 & 집중 조명" },
            
            // 데스크 액세서리
            { id: 3, name: "가습기", level: 1.5, points: 1.5, category: "데스크 액세서리" },
            { id: 7, name: "무선충전기", level: 2, points: 2, category: "데스크 액세서리" },
            { id: 8, name: "탁상용 선풍기", level: 2, points: 2, category: "데스크 액세서리" },
            
            // 보조 아이템
            { id: 2, name: "손목받침대", level: 1, points: 1, category: "보조 아이템" },
            { id: 12, name: "모니터받침대", level: 2, points: 2, category: "보조 아이템" },
            { id: 15, name: "발받침대", level: 3, points: 3, category: "보조 아이템" },
            
            // 디바이스 거치대
            { id: 4, name: "노트북 거치대", level: 1.5, points: 1.5, category: "디바이스 거치대" },
            { id: 5, name: "독서대", level: 1.5, points: 1.5, category: "디바이스 거치대" },
            { id: 11, name: "핸드폰 거치대", level: 2, points: 2, category: "디바이스 거치대" },
            
            // 프리미엄 아이템
            { id: 21, name: "마사지기", level: 5, points: 5, category: "프리미엄 아이템" },
            { id: 22, name: "모니터암", level: 4.5, points: 4.5, category: "프리미엄 아이템" },
            { id: 23, name: "포터블 모니터", level: 5, points: 5, category: "프리미엄 아이템" }
        ];

        let selectedItems = {};
        let totalPoints = 0;
        const maxPoints = 9;

        function getLevelColor(level) {
            const colors = {
                1: "level-1",
                1.5: "level-1-5", 
                2: "level-2",
                3: "level-3",
                4: "level-4",
                4.5: "level-4",
                5: "level-5"
            };
            return colors[level] || "bg-gray-500";
        }

        function showConfetti() {
            const container = document.getElementById('confetti-container');
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.animationDelay = Math.random() * 3 + 's';
                confetti.style.animationDuration = (2 + Math.random() * 3) + 's';
                confetti.innerHTML = '✨';
                container.appendChild(confetti);
                
                setTimeout(() => confetti.remove(), 5000);
            }
        }

        function updateDisplay() {
            totalPoints = Object.entries(selectedItems).reduce((sum, [itemId, quantity]) => {
                const item = items.find(item => item.id === parseInt(itemId));
                return sum + (item.points * quantity);
            }, 0);

            const totalCount = Object.values(selectedItems).reduce((sum, qty) => sum + qty, 0);
            
            document.getElementById('points-display').textContent = `${totalPoints.toFixed(1)} / ${maxPoints} 점`;
            document.getElementById('count-display').textContent = `${totalCount}개 선택됨`;
            document.getElementById('progress-bar').style.width = `${(totalPoints / maxPoints) * 100}%`;
            
            if (totalPoints === maxPoints) {
                showConfetti();
            }
            
            updateSummary();
        }

        function updateSummary() {
            const summaryDiv = document.getElementById('selection-summary');
            const selectedItemsDiv = document.getElementById('selected-items');
            const totalCount = Object.values(selectedItems).reduce((sum, qty) => sum + qty, 0);
            
            if (totalCount > 0) {
                summaryDiv.style.display = 'block';
                document.getElementById('summary-count').textContent = totalCount;
                document.getElementById('total-count').textContent = `${totalCount}개 선택`;
                document.getElementById('total-points').textContent = `${totalPoints.toFixed(1)} / ${maxPoints}점`;
                
                selectedItemsDiv.innerHTML = '';
                Object.entries(selectedItems).forEach(([itemId, quantity]) => {
                    const item = items.find(i => i.id === parseInt(itemId));
                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'flex items-center justify-between bg-purple-900 bg-opacity-50 rounded-lg p-4';
                    itemDiv.innerHTML = `
                        <div class="flex items-center">
                            <span class="font-medium">${item.name}</span>
                            ${quantity > 1 ? `<span class="ml-2 px-2 py-1 bg-yellow-400 text-purple-900 rounded-full text-xs font-bold">x${quantity}</span>` : ''}
                        </div>
                        <div class="flex items-center space-x-4">
                            <span class="text-yellow-400">Level ${item.level}</span>
                            <span class="text-purple-300">${(item.points * quantity).toFixed(1)}점</span>
                        </div>
                    `;
                    selectedItemsDiv.appendChild(itemDiv);
                });
                
                document.getElementById('perfect-combo').style.display = totalPoints === maxPoints ? 'block' : 'none';
            } else {
                summaryDiv.style.display = 'none';
            }
        }

        function submitToGoogleForm() {
            const userName = document.getElementById('user-name').value.trim();
            const userDepartment = document.getElementById('user-department').value;
            
            if (!userName) {
                alert('닉네임을 입력해주세요!');
                return;
            }
            
            if (!userDepartment) {
                alert('부서를 선택해주세요!');
                return;
            }

            const totalCount = Object.values(selectedItems).reduce((sum, qty) => sum + qty, 0);
            if (totalCount === 0) {
                alert('최소 1개 이상의 아이템을 선택해주세요!');
                return;
            }

            // 선택한 아이템들을 텍스트로 변환
            let itemsText = '';
            Object.entries(selectedItems).forEach(([itemId, quantity]) => {
                const item = items.find(i => i.id === parseInt(itemId));
                itemsText += `• ${item.name} x${quantity} (Level ${item.level}, ${(item.points * quantity).toFixed(1)}점)\n`;
            });

            // 구글 폼 Pre-fill 링크 직접 구성
            const baseUrl = 'https://docs.google.com/forms/d/e/1FAIpQLSdW-ODlrlbpFGS98iFP8WC5Ope4A_i8bNW3GBdl17NyAdJnHA/viewform';
            
            const params = new URLSearchParams({
                'usp': 'pp_url',
                'entry.1285911199': userName,
                'entry.1334944395': userDepartment,
                'entry.1505919809': itemsText.trim(),
                'entry.1855956162': totalPoints.toFixed(1),
                'entry.389880907': totalCount.toString()
            });

            const filledUrl = `${baseUrl}?${params.toString()}`;

            // 디버깅용 - 콘솔에 URL 출력
            console.log('Base URL:', baseUrl);
            console.log('Parameters:', params.toString());
            console.log('Final URL:', filledUrl);
            console.log('User Name:', userName);
            console.log('Department:', userDepartment);
            console.log('Items:', itemsText.trim());

            // 새 탭에서 구글 폼 열기
            window.open(filledUrl, '_blank');
            
            // 성공 메시지 표시
            alert('🎉 구글 폼이 새 탭에서 열렸습니다!\n내용을 확인하고 제출해주세요.');
        }

        function handleItemSelect(itemId, increment = true) {
            const item = items.find(item => item.id === itemId);
            const currentQuantity = selectedItems[itemId] || 0;
            
            if (increment) {
                const newTotalPoints = totalPoints + item.points;
                if (newTotalPoints <= maxPoints) {
                    selectedItems[itemId] = currentQuantity + 1;
                    updateDisplay();
                    renderItems();
                }
            } else {
                if (currentQuantity > 0) {
                    const newQuantity = currentQuantity - 1;
                    if (newQuantity === 0) {
                        delete selectedItems[itemId];
                    } else {
                        selectedItems[itemId] = newQuantity;
                    }
                    updateDisplay();
                    renderItems();
                }
            }
        }

        function renderItems() {
            const grid = document.getElementById('items-grid');
            grid.innerHTML = '';
            
            // 카테고리별로 그룹화
            const categories = [
                "책상 위 정리 아이템",
                "다용도 오거나이저",
                "무드 & 집중 조명",
                "데스크 액세서리",
                "보조 아이템",
                "디바이스 거치대",
                "프리미엄 아이템"
            ];
            
            categories.forEach(category => {
                // 카테고리 헤더 추가
                const categoryHeader = document.createElement('div');
                categoryHeader.className = 'col-span-full mb-4 mt-8 first:mt-0';
                categoryHeader.innerHTML = `
                    <h2 class="text-2xl font-bold text-center text-yellow-400 mb-2">
                        ${category}
                    </h2>
                    <div class="w-24 h-1 bg-gradient-to-r from-yellow-400 to-orange-400 rounded-full mx-auto"></div>
                `;
                grid.appendChild(categoryHeader);
                
                // 해당 카테고리의 아이템들 렌더링
                const categoryItems = items.filter(item => item.category === category);
                categoryItems.forEach(item => {
                    const selectedQuantity = selectedItems[item.id] || 0;
                    const isSelected = selectedQuantity > 0;
                    const canSelect = totalPoints + item.points <= maxPoints;
                    
                    const itemDiv = document.createElement('div');
                    itemDiv.className = `relative overflow-hidden rounded-xl border transition-all duration-300 transform hover:scale-105 ${
                        isSelected 
                            ? 'border-yellow-400 bg-gradient-to-br from-purple-700 to-indigo-700 shadow-2xl' 
                            : canSelect 
                                ? 'border-purple-600 bg-gradient-to-br from-purple-800 to-indigo-800 hover:border-purple-400 shadow-lg' 
                                : 'border-gray-600 bg-gradient-to-br from-gray-800 to-gray-700 opacity-50'
                    }`;
                    
                    itemDiv.innerHTML = `
                        <div class="absolute top-3 left-3 px-3 py-1 rounded-full text-xs font-bold ${getLevelColor(item.level)} text-white">
                            Level ${item.level}
                        </div>

                        ${isSelected ? `
                            <div class="absolute top-3 right-3 w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center">
                                <span class="text-sm font-bold text-purple-900">${selectedQuantity}</span>
                            </div>
                        ` : ''}

                        <div class="p-6 pt-16">
                            <h3 class="text-lg font-semibold mb-2 text-white">${item.name}</h3>
                            <div class="flex items-center justify-between mb-4">
                                <div class="text-lg font-semibold text-yellow-400">
                                    Level ${item.level}
                                </div>
                                <div class="text-purple-300 text-sm">
                                    ${item.points} 점
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-center space-x-3">
                                <button
                                    onclick="handleItemSelect(${item.id}, false)"
                                    ${selectedQuantity === 0 ? 'disabled' : ''}
                                    class="w-8 h-8 rounded-full bg-pink-500 hover:bg-pink-600 disabled:bg-gray-500 disabled:cursor-not-allowed flex items-center justify-center text-white font-bold transition-colors"
                                >
                                    -
                                </button>
                                <span class="text-white font-semibold w-8 text-center">
                                    ${selectedQuantity}
                                </span>
                                <button
                                    onclick="handleItemSelect(${item.id}, true)"
                                    ${!canSelect ? 'disabled' : ''}
                                    class="w-8 h-8 rounded-full bg-purple-500 hover:bg-purple-600 disabled:bg-gray-500 disabled:cursor-not-allowed flex items-center justify-center text-white font-bold transition-colors"
                                >
                                    +
                                </button>
                            </div>
                        </div>

                        <div class="absolute inset-0 bg-gradient-to-r from-purple-400 to-pink-400 opacity-0 hover:opacity-10 transition-opacity duration-300 pointer-events-none"></div>
                    `;
                    
                    grid.appendChild(itemDiv);
                });
            });
        }

        // Initialize
        renderItems();
        updateDisplay();
    </script>
</body>
</html>